"use strict";(self.webpackChunkpresupuestos=self.webpackChunkpresupuestos||[]).push([[973],{8973:(b,_,s)=>{s.r(_),s.d(_,{default:()=>S});var p=s(5861),r=s(4946),f=s(6814),o=s(3546),l=s(1845),C=s(5674),y=s.n(C),v=s(1242),E=s(9303),h=s(553),d=s(351);const T=["agGrid"];y()(l);let S=(()=>{class c{constructor(){this._location=(0,r.f3M)(f.Ye),this._dataStoreService=(0,r.f3M)(E.Z),this.data=[],this.groupHeaderHeight=25,this.headerHeight=25,this._datos=[]}ngOnInit(){this._dataTable=this._dataStoreService.dataTable,this._createData(),this._createColumns()}ngAfterViewInit(){this.renderChartLines(),this.renderChartMarker(),this.renderChart()}_createData(){var e=this;return(0,p.Z)(function*(){const i=e._dataStoreService.selectedCodeRowFirstLevel.split(" ")[0];switch(e._dataTable.clasificationType){case"ingresosEconomicaCapitulos":e._datos=e._dataTable.rowDataIngresos.filter(t=>t.CodCap==Number(i));break;case"ingresosEconomicaArticulos":case"ingresosEconomicaConceptos":case"ingresosEconomicaEconomicos":e._datos=e._dataTable.rowDataIngresos.filter(t=>t.CodEco==i);break;case"gastosOrganicaOrganicos":e._datos=e._dataTable.rowDataGastos.filter(t=>t.CodOrg==i);break;case"gastosProgramaAreas":case"gastosProgramaPoliticas":case"gastosProgramaGrupos":case"gastosProgramaProgramas":e._datos=e._dataTable.rowDataGastos.filter(t=>t.CodPro==i);break;case"gastosEconomicaCapitulos":e._datos=e._dataTable.rowDataGastos.filter(t=>t.CodCap==i);break;case"gastosEconomicaArticulos":case"gastosEconomicaConceptos":case"gastosEconomicaEconomicos":e._datos=e._dataTable.rowDataGastos.filter(t=>t.CodEco==i)}if(e._dataTable.dataPropertyTable.isIngresos){const t=(0,d.r)("Definitivas",e._datos),D=(0,d.r)("Iniciales",e._datos),g=(0,d.r)("RecaudacionNeta",e._datos);e._nameSerie1="Definitivas",e._nameSerie2="RecaudacionNeta",e._nameSerie3="",e.data=[];for(let a=2015;a<=h.N.currentYear;a++)if(t[a]>0){const u={year:a,Definitivas:t[a],Netas:g[a]};(2022===a||a===h.N.currentYear)&&(u.Definitivas=D[a],u.Netas=g[a-1]),e.data.push(u)}}else{const t=(0,d.r)("Definitivas",e._datos),D=(0,d.r)("ObligacionesReconocidasNetas",e._datos),g=(0,d.r)("ObligacionesPendientePago",e._datos);e._nameSerie1="Definitivas",e._nameSerie2="ObligacionesReconocidasNetas",e._nameSerie3="ObligacionesPendientePago",e.data=[];for(let a=2015;a<=h.N.currentYear;a++)t[a]>0&&e.data.push({year:a,Definitivas:t[a],Netas:D[a],ObligacionesPendientes:g[a]})}return e.data})()}renderChartLines(){l.chart({title:{text:this._dataTable.dataPropertyTable.graphTitle,style:{fontSize:"24px"}},subtitle:{text:`${this._dataTable.dataPropertyTable.subHeaderName} ${this._dataStoreService.selectedCodeRowFirstLevel}`,style:{fontSize:"24px"}},legend:{itemStyle:{fontSize:"16px"}},chart:{type:"line",renderTo:"chart-containerLines"},xAxis:{title:{text:"A\xf1os",style:{fontSize:"16px"}},labels:{style:{fontSize:"16px"}},categories:this.data.map(e=>e.year+"")},yAxis:{title:{text:"en miles de Euros",style:{fontSize:"16px"}}},plotOptions:{line:{dataLabels:{enabled:!0,style:{fontSize:"14px"}},enableMouseTracking:!1}},series:[{type:"line",marker:{symbol:"circle",fillColor:"green",radius:8},name:"Definitivas",data:this.data.map(e=>e.Definitivas)},{type:"line",marker:{symbol:"square",fillColor:"red",radius:8},name:this._nameSerie2,data:this.data.map(e=>e.Netas)}]})}renderChart(){l.chart("chart-container",{legend:{itemStyle:{fontSize:"16px"}},chart:{type:"bubble"},title:{text:""},subtitle:{text:""},xAxis:{title:{text:"A\xf1os",style:{fontSize:"16px"}},labels:{style:{fontSize:"16px"}},categories:this.data.map(e=>e.year+"")},yAxis:{title:{text:"en miles de Euros",style:{fontSize:"16px"}}},plotOptions:{bubble:{dataLabels:{enabled:!0,style:{fontSize:"12px"}},enableMouseTracking:!1}},series:[{type:"bubble",name:"Definitivas",data:this.data.map(e=>[e.year,e.Definitivas,e.Definitivas/1e3])},{type:"bubble",name:this._nameSerie2,data:this.data.map(e=>[e.year,e.Netas,e.Netas/1e3])}]})}renderChartMarker(){l.chart({legend:{itemStyle:{fontSize:"16px"}},chart:{type:"scatter",renderTo:"chart-containerMarker"},title:{text:""},subtitle:{text:""},xAxis:{title:{text:"A\xf1os",style:{fontSize:"16px"}},labels:{style:{fontSize:"16px"}},categories:this.data.map(e=>e.year.toString())},yAxis:{title:{text:"en miles de Euros",style:{fontSize:"16px"}}},plotOptions:{line:{dataLabels:{enabled:!0,style:{fontSize:"14px"}},enableMouseTracking:!1}},series:[{type:"scatter",marker:{symbol:"circle",fillColor:"green",radius:8},name:"Definitivas",data:this.data.map(e=>e.Definitivas)},{type:"scatter",marker:{symbol:"square",fillColor:"red",radius:8},name:this._nameSerie2,data:this.data.map(e=>e.Netas)}]})}_createColumns(){this.columnDefs=[{headerName:"A\xf1o",field:"year",width:70},{headerName:"Previsiones definitivas",field:"Definitivas",width:180,aggFunc:"sum",cellRenderer:v.QG},{headerName:this._nameSerie2,field:"Netas",width:200,aggFunc:"sum",cellRenderer:v.QG}],this.defaultColDef={sortable:!0,resizable:!0,filter:!1}}volver(){this._location.back()}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=r.Xpm({type:c,selectors:[["app-graph-detalle"]],viewQuery:function(e,i){if(1&e&&r.Gf(T,5),2&e){let t;r.iGM(t=r.CRH())&&(i.agGrid=t.first)}},standalone:!0,features:[r.jDz],decls:10,vars:9,consts:[[1,"OCM-graph"],[1,"OCM-menu"],["type","button",1,"OCM-button",3,"click"],[2,"width","1200px","height","500px"],["id","chart-containerLines"],["id","chart-container"],["id","chart-containerMarker"],["rowSelection","multiple",1,"ag-theme-balham",2,"width","700px","height","325px","padding-right","20px","margin-left","310px",3,"rowData","columnDefs","defaultColDef","groupIncludeFooter","groupIncludeTotalFooter","groupHeaderHeight","headerHeight","localeText","suppressAggFuncInHeader"],["agGrid",""]],template:function(e,i){1&e&&(r.TgZ(0,"div",0)(1,"div",1)(2,"button",2),r.NdJ("click",function(){return i.volver()}),r._uU(3,"Volver"),r.qZA()(),r.TgZ(4,"div",3),r._UZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"ag-grid-angular",7,8),r.qZA()()),2&e&&(r.xp6(8),r.Q6J("rowData",i.data)("columnDefs",i.columnDefs)("defaultColDef",i.defaultColDef)("groupIncludeFooter",!0)("groupIncludeTotalFooter",!0)("groupHeaderHeight",i.groupHeaderHeight)("headerHeight",i.headerHeight)("localeText",i.localeText)("suppressAggFuncInHeader",!0))},dependencies:[o.sF,o.N8]}),c})()},9303:(b,_,s)=>{s.d(_,{Z:()=>f});var p=s(8645),r=s(4946);let f=(()=>{class o{constructor(){this._dataSource=new p.x,this.dataSource$=this._dataSource.asObservable()}set dataTable(n){this._data=n}get dataTable(){return this._data}set selectedCodeRowFirstLevel(n){this._selectedCodeRowFirstLevel=n}get selectedCodeRowFirstLevel(){return this._selectedCodeRowFirstLevel}set dataTotalesPresupuesto(n){this._dataTotalesPresupuesto=n}get dataTotalesPresupuesto(){return this._dataTotalesPresupuesto}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);