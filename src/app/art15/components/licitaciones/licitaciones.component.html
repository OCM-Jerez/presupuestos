<main class="OCM-dark-teme">
	<h2 class="OCM-title-dark">Licitaciones</h2>

	<section class="OCM-flex OCM-flex--center">
		<button class="OCM-button-container OCM-button" type="button" (click)="appOCM()">App OCM</button>
		<button
			class="OCM-button-container OCM-button"
			[ngClass]="selectedButton === 'todas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			type="button"
			(click)="cambiarEstado('todas')"
		>
			Todas
		</button>
		<button
			class="OCM-button-container OCM-button"
			[ngClass]="selectedButton === 'ayuntamiento' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			type="button"
			(click)="cambiarEstado('ayuntamiento')"
		>
			Fondos propios del Ayuntamiento
		</button>
		<button
			class="OCM-button-container OCM-button"
			type="button"
			[ngClass]="selectedButton === 'cee' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			(click)="cambiarEstado('cee')"
		>
			Con subvención CEE
		</button>
		<button
			class="OCM-button-container OCM-button"
			[ngClass]="selectedButton === 'gobierno' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			type="button"
			(click)="cambiarEstado('gobierno')"
		>
			Gobierno de España
		</button>
		<button
			class="OCM-button-container OCM-button"
			[ngClass]="selectedButton === 'junta' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			type="button"
			(click)="cambiarEstado('junta')"
		>
			Junta de Andalucía
		</button>
		<button
			class="OCM-button-container OCM-button"
			[ngClass]="selectedButton === 'diputacion' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			type="button"
			(click)="cambiarEstado('diputacion')"
		>
			Diputación Provincial de Cádiz
		</button>
		<button
			class="OCM-button-container OCM-button"
			[ngClass]="selectedButton === 'solares' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'"
			type="button"
			(click)="cambiarEstado('solares')"
		>
			Subastas Solares y Edificaciones Ruinosas
		</button>
	</section>

	<section>
		<div class="InputContainer">
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
				stroke="#657789"
				stroke-width="3"
				stroke-linecap="round"
				stroke-linejoin="round"
				class="feather feather-search"
			>
				<circle cx="11" cy="11" r="8" />
				<line x1="21" y1="21" x2="16.65" y2="16.65" />
			</svg>
			<input type="text" [(ngModel)]="searchText" (input)="filterData()" placeholder="Buscar licitaciones..." />
		</div>

		@if (canAddRowSupabase) {
			<button class="OCM-button" (click)="addNew()">Añadir licitación</button>
		}
	</section>

	<section class="reveal-animation">
		@if (selectedButton === 'todas') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">Todas</header>

			<section class="OCM-flex OCM-flex--center">
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'todasTodas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="todas('todas')"
				>
					Todas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'todasPendientes'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="pendientes('todas')"
				>
					Pendientes
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'todasLicitadas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="licitadas('todas')"
				>
					Licitadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'todasAdjudicadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="adjudicadas('todas')"
				>
					Adjudicadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'todasTerminadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="terminadas('todas')"
				>
					Terminadas
				</button>
			</section>

			<section class="gridMenu">
				@for (menu of licitacionesAll; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.title" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				}
			</section>
		}

		@if (selectedButton === 'ayuntamiento') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">Con fondos propios del Ayuntamiento</header>

			<section class="OCM-flex OCM-flex--center">
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ayuntamientoTodas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="todas('ayuntamiento')"
				>
					Todas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ayuntamientoPendientes'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="pendientes('ayuntamiento')"
				>
					Pendientes
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ayuntamientoLicitadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="licitadas('ayuntamiento')"
				>
					Licitadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ayuntamientoAdjudicadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="adjudicadas('ayuntamiento')"
				>
					Adjudicadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ayuntamientoTerminadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="terminadas('ayuntamiento')"
				>
					Terminadas
				</button>
			</section>

			<section class="gridMenu">
				@for (menu of licitacionesAyto; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.title" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				}
			</section>
		}

		@if (selectedButton === 'cee') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">Con subvención CEE</header>
			<section class="OCM-flex OCM-flex--center">
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ceeTodas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="todas('cee')"
				>
					Todas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ceePendientes' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="pendientes('cee')"
				>
					Pendientes
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ceeLicitadas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="licitadas('cee')"
				>
					Licitadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ceeAdjudicadas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="adjudicadas('cee')"
				>
					Adjudicadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'ceeTerminadas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="terminadas('cee')"
				>
					Terminadas
				</button>
			</section>

			<section class="gridMenu">
				@for (menu of licitacionesCEE; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.title" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				}
			</section>
		}

		@if (selectedButton === 'diputacion') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">Con subvención Diputación Provincial de Cádiz</header>
			<section class="OCM-flex OCM-flex--center">
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'diputacionTodas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="todas('diputacion')"
				>
					Todas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'diputacionPendientes'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="pendientes('diputacion')"
				>
					Pendientes
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'diputacionLicitadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="licitadas('diputacion')"
				>
					Licitadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'diputacionAdjudicadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="adjudicadas('diputacion')"
				>
					Adjudicadas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'diputacionTerminadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="terminadas('diputacion')"
				>
					Terminadas
				</button>
			</section>
			<section class="gridMenu">
				@for (menu of licitacionesDiputacion; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.title" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				}
			</section>
		}

		@if (selectedButton === 'gobierno') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">Con subvención Gobierno de España</header>
			<section class="gridMenu">
				@for (menu of licitacionesESP; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.titulo" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				} @empty {
					<p class="OCM-subtitle-dark s">No hay licitaciones con subvención del Gobierno de España</p>
				}
			</section>
		}

		@if (selectedButton === 'junta') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">Con subvención Junta de Andalucía</header>
			<section class="gridMenu">
				@for (menu of licitacionesESP; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.titulo" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				} @empty {
					<p class="OCM-subtitle-dark s">No hay licitaciones con subvención de la Junta de Andalucía</p>
				}
			</section>
		}

		@if (selectedButton === 'solares') {
			<header class="OCM-subtitle-dark OCM-subtitle-dark--center">
				Subastas Registro Municipal de Solares y Edificaciones Ruinosas
			</header>
			<section class="OCM-flex OCM-flex--center">
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'solaresTodas' ? 'OCM-button-selected' : 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="todas('solares')"
				>
					Todas
				</button>
				<button
					class="OCM-button-container OCM-button"
					[ngClass]="
						selectedButtonClasification === 'solaresTerminadas'
							? 'OCM-button-selected'
							: 'OCM-button-container OCM-button'
					"
					type="button"
					(click)="terminadas('solares')"
				>
					Terminadas
				</button>
			</section>
			<section class="gridMenu">
				@for (menu of licitacionesSolares; track menu) {
					<section [class.highlight]="menu.highlighted">
						<app-card-menu [titulo]="menu.title" [rutaImagen]="menu.rutaImagen" (click)="menu.funcion()" />
					</section>
				}
			</section>
		}
	</section>
</main>
